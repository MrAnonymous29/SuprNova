<template>
    <!-- Main container -->
    <div class="loading-container">
        <!-- Loading spinner shown when isLoading is true -->
        <template if:true={isLoading}>
            <div class="spinner-container">
                <lightning-spinner alternative-text="Loading" size="medium" style="color: orangered;"></lightning-spinner>
            </div>
        </template>
        <!-- Lightning card for the dynamic record picker -->
        <lightning-card
            title="Dynamic Record Picker "
            class="slds-card__body_inner"
            icon-name="standard:search">
            <div class="slds-form-element">
                <label class="slds-form-element__label"><b>Select a record</b> </label>
                <div class="slds-form-element__control slds-combobox-group">
                    <!-- Target object selector shown when showTargetSelector is true -->
                    <template if:true={showTargetSelector}>
                        <lightning-combobox
                            data-id="targetSelector"
                            label="Select sObject"
                            variant="label-hidden"
                            placeholder="Select object"
                            options={targetObjects}
                            value={selectedTarget}
                            onchange={handleTargetSelection}
                            class="slds-combobox_object-switcher slds-combobox-addon_start">
                        </lightning-combobox>
                    </template>
                    <!-- Record picker for the selected target object -->
                    <lightning-record-picker
                        object-api-name={selectedTarget}
                        placeholder="Search for a Record"
                        label="Select a record"
                        variant="label-hidden"
                        onchange={handleRecordSelect}
                        class="slds-size_full slds-combobox-addon_end">
                    </lightning-record-picker>
                </div>
            </div>
        </lightning-card>
    </div>
</template>
